<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:m="clr-namespace:Diocles.Models"
        xmlns:h="clr-namespace:Diocles.Helpers"
        xmlns:ip="https://github.com/MahApps/IconPacks.Avalonia"
        xmlns:hm="clr-namespace:Hestia.Contract.Models;assembly=Hestia.Contract"
        xmlns:services="clr-namespace:Diocles.Services"
        xmlns:ih="clr-namespace:Inanna.Helpers;assembly=Inanna">
    <Style Selector="ItemsControl.todo-view">
        <Setter Property="ItemTemplate">
            <DataTemplate DataType="m:ToDoNotify">
                <Button Classes="align-stretch"
                        CommandParameter="{Binding}"
                        Command="{x:Static h:DioclesCommands.OpenToDosCommand}"
                        Background="{Binding Color, Converter={StaticResource ColorToBrushConverter}, ConverterParameter={x:Static ih:Numbers.Byte_51}}">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <StackPanel Classes="horizontal">
                            <Button Classes="align-center mini"
                                    Content="{ip:MaterialDesign Reorder}"
                                    CommandParameter="{Binding}"
                                    Command="{x:Static h:DioclesCommands.ChangeOrderCommand}"
                                    IsVisible="{Binding $parent[ItemsControl].ItemCount, Converter={StaticResource IsNotValueConverter}, ConverterParameter={x:Static ih:Numbers.Int32_1}}"/>

                            <ToggleButton Classes="h1"
                                          IsChecked="{Binding IsCan, Mode=OneWay, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoIsCan.CanIncomplete}}"
                                          IsVisible="{Binding IsCan, Converter={StaticResource IsNotValueConverter}, ConverterParameter={x:Static hm:ToDoIsCan.None}}"
                                          CommandParameter="{Binding}"
                                          Command="{x:Static h:DioclesCommands.SwitchToDoCommand}">
                                <ip:PackIconMaterialDesign Kind="Check"
                                                           Classes="h2 align-center"
                                                           IsVisible="{Binding IsCan, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoIsCan.CanIncomplete}}" />
                            </ToggleButton>
                        </StackPanel>

                        <Grid Grid.Column="1" Classes="align-left-center" RowDefinitions="Auto,Auto">
                            <TextBlock Classes="text-wrap field h5"
                                       Classes.miss="{Binding Status, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoStatus.Miss}}"
                                       Classes.ready-for-complete="{Binding Status, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoStatus.ReadyForComplete}}"
                                       Classes.planned="{Binding Status, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoStatus.Planned}}"
                                       Classes.completed="{Binding Status, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoStatus.Completed}}"
                                       Classes.coming-soon="{Binding Status, Converter={StaticResource IsValueConverter}, ConverterParameter={x:Static hm:ToDoStatus.ComingSoon}}"
                                       Text="{Binding Name}" />

                            <Button Grid.Row="1"
                                    Classes="align-stretch"
                                    Command="{x:Static h:DioclesCommands.OpenParentCommand}"
                                    CommandParameter="{Binding Active}"
                                    IsVisible="{Binding Active, Converter={StaticResource IsNotValueConverter}, ConverterParameter={x:Null}}">
                                <TextBlock Text="{Binding Active.Name}" Classes="text-wrap align-center small" />
                            </Button>
                        </Grid>

                        <Grid Grid.Column="2" RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,Auto">
                            <Button Content="{ip:MaterialDesign Edit}"
                                    CommandParameter="{Binding}"
                                    Command="{Binding $parent[services:IToDosView].ViewModel.ShowEditCommand}" />
                            <Button Grid.Column="1" Classes="danger"
                                    Content="{ip:MaterialDesign Delete}"
                                    CommandParameter="{Binding}"
                                    Command="{x:Static h:DioclesCommands.DeleteToDoCommand}" />

                            <Button Grid.Row="1" Command="{x:Static h:DioclesCommands.SwitchFavoriteCommand}"
                                    CommandParameter="{Binding}">
                                <StackPanel>
                                    <ip:PackIconMaterialDesign IsVisible="{Binding IsFavorite}" Kind="Favorite" />
                                    <ip:PackIconMaterialDesign IsVisible="{Binding !IsFavorite}" Kind="FavoriteBorder" />
                                </StackPanel>
                            </Button>
                        </Grid>
                    </Grid>
                </Button>
            </DataTemplate>
        </Setter>
    </Style>
</Styles>