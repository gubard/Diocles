<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:m="clr-namespace:Diocles.Models"
        xmlns:h="clr-namespace:Diocles.Helpers"
        xmlns:ip="https://github.com/MahApps/IconPacks.Avalonia"
        xmlns:hm="clr-namespace:Hestia.Contract.Models;assembly=Hestia.Contract"
        xmlns:ih="clr-namespace:Inanna.Helpers;assembly=Inanna"
        xmlns:ui="clr-namespace:Diocles.Ui"
        xmlns:is="clr-namespace:Inanna.Services;assembly=Inanna"
        xmlns:s="clr-namespace:Diocles.Services">
    <Style Selector="ItemsControl.todo-view">
        <Setter Property="ItemTemplate">
            <DataTemplate DataType="m:ToDoNotify">
                <Button Classes="align-stretch"
                        CommandParameter="{Binding}"
                        Command="{x:Static h:DioclesCommands.OpenToDosCommand}"
                        Background="{Binding Color, Converter={x:Static is:ColorToBrushConverter.Instance}, ConverterParameter={x:Static ih:Numbers.Byte_51}}"
                        IsEnabled="{Binding !IsDrag}"
                        ToolTip.Tip="{Binding Converter={x:Static s:DescriptionToolTipConverter.Instance}, ConverterParameter={x:Static h:DiocleHelper.DesktopDescriptionStringParameters}}">
                    <Panel>
                        <Grid ColumnDefinitions="*,Auto">
                            <Grid RowDefinitions="Auto,*,Auto">
                                <TextBlock Classes="small"
                                           Text="{Binding Type, Converter={x:Static is:EnumLocalizationConverter.Instance}}" />

                                <Grid Grid.Row="1" ColumnDefinitions="Auto,Auto,*">
                                    <Panel
                                        IsVisible="{Binding $parent[ui:ToDoListView].ViewModel.Items.Count, Converter={x:Static is:IsNotValueConverter.Instance}, ConverterParameter={x:Static ih:Numbers.Int32_1}}">
                                        <Button Classes="align-stretch mini"
                                                IsVisible="{OnPlatform Default=False, Android=True, iOS=True, Browser=True}"
                                                Content="{ip:MaterialDesign Reorder}"
                                                CommandParameter="{Binding}"
                                                Command="{x:Static h:DioclesCommands.ChangeOrderCommand}" />
                                        <ip:PackIconMaterialDesign Kind="Reorder"
                                                                   Classes="s-20 align-center"
                                                                   Background="Transparent"
                                                                   ih:InputElementAssist.IsDragHandle="True"
                                                                   IsVisible="{OnPlatform  Default=True, Android=False, iOS=False, Browser=False}" />
                                    </Panel>

                                    <ToggleButton Grid.Column="1"
                                                  Classes="s-40"
                                                  IsChecked="{Binding IsCanDo, Mode=OneWay, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoIsCanDo.CanIncomplete}}"
                                                  IsVisible="{Binding IsCanDo, Converter={x:Static is:IsNotValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoIsCanDo.None}}"
                                                  CommandParameter="{Binding}"
                                                  Command="{x:Static h:DioclesCommands.SwitchToDoCommand}">
                                        <ip:PackIconMaterialDesign Kind="Check"
                                                                   Classes="h2 align-center"
                                                                   IsVisible="{Binding IsCanDo, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoIsCanDo.CanIncomplete}}" />
                                    </ToggleButton>

                                    <Grid Grid.Column="2" Classes="align-left-center" RowDefinitions="Auto,Auto">
                                        <TextBlock Classes="text-wrap m-l-5 h5"
                                                   Classes.miss="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.Miss}}"
                                                   Classes.ready-for-complete="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.ReadyForComplete}}"
                                                   Classes.planned="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.Planned}}"
                                                   Classes.completed="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.Completed}}"
                                                   Classes.coming-soon="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.ComingSoon}}"
                                                   Text="{Binding Name}" />

                                        <Button Grid.Row="1"
                                                Classes="m-0 p-4"
                                                Command="{x:Static h:DioclesCommands.OpenParentCommand}"
                                                CommandParameter="{Binding Active}"
                                                IsVisible="{Binding Active, Converter={x:Static is:IsNotValueConverter.Instance}, ConverterParameter={x:Null}}">
                                            <TextBlock Text="{Binding Active.Name}"
                                                       Classes="text-wrap align-center small" />
                                        </Button>
                                    </Grid>
                                </Grid>

                                <TextBlock Grid.Row="2"
                                           Classes="small"
                                           IsVisible="{Binding HasDueDate}"
                                           Text="{Binding DueDate, Converter={x:Static is:EnumLocalizationConverter.Instance}}" />

                            </Grid>

                            <StackPanel Grid.Column="1" Classes="align-center">
                                <StackPanel Classes="horizontal align-right">
                                    <Button Content="{ip:MaterialDesign Edit}"
                                            CommandParameter="{Binding}"
                                            Command="{x:Static h:DioclesCommands.ShowEditToDoCommand}" />
                                    <Button Classes="danger"
                                            Content="{ip:MaterialDesign Delete}"
                                            CommandParameter="{Binding}"
                                            Command="{x:Static h:DioclesCommands.ShowDeleteToDoCommand}" />
                                </StackPanel>


                                <StackPanel Classes="horizontal align-right">
                                    <Button Command="{x:Static h:DioclesCommands.SwitchFavoriteCommand}"
                                            CommandParameter="{Binding}">
                                        <StackPanel>
                                            <ip:PackIconMaterialDesign IsVisible="{Binding IsFavorite}" Kind="Favorite" />
                                            <ip:PackIconMaterialDesign IsVisible="{Binding !IsFavorite}"
                                                                       Kind="FavoriteBorder" />
                                        </StackPanel>
                                    </Button>

                                    <Button Content="{ip:MaterialDesign MoreHoriz}">
                                        <Button.Flyout>
                                            <MenuFlyout>
                                                <MenuItem Icon="{ip:MaterialDesign AccountTree}"
                                                          Command="{x:Static h:DioclesCommands.ShowChangeParentCommand}"
                                                          CommandParameter="{Binding}"
                                                          Header="{DynamicResource Lang.ChangeParent}" />
                                                <MenuItem Icon="{ip:MaterialDesign CopyrightOutline}"
                                                          Header="{DynamicResource Lang.Clone}"
                                                          Command="{x:Static h:DioclesCommands.ShowCloneCommand}"
                                                          CommandParameter="{Binding}" />
                                                <MenuItem Icon="{ip:MaterialDesign Link}"
                                                          Header="{DynamicResource Lang.OpenLink}"
                                                          Command="{x:Static h:DioclesCommands.OpenLinkCommand}"
                                                          CommandParameter="{Binding}"
                                                          IsVisible="{Binding Link, Converter={x:Static is:IsNotNullOrWhiteSpaceConverter.Instance}}" />
                                            </MenuFlyout>
                                        </Button.Flyout>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </Grid>

                        <Panel IsVisible="{Binding !IsDrag}">
                            <Border Classes="for-drop">
                                <Grid RowDefinitions="Auto,*">
                                    <TextBlock Classes="text-wrap m-l-5 h5 align-center"
                                               Classes.miss="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.Miss}}"
                                               Classes.ready-for-complete="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.ReadyForComplete}}"
                                               Classes.planned="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.Planned}}"
                                               Classes.completed="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.Completed}}"
                                               Classes.coming-soon="{Binding Status, Converter={x:Static is:IsValueConverter.Instance}, ConverterParameter={x:Static hm:ToDoStatus.ComingSoon}}"
                                               Text="{Binding Name}" />

                                    <Grid Grid.Row="1" Classes="align-stretch" ColumnDefinitions="*,*,*">
                                        <Panel Tag="DropUp">
                                            <Rectangle Classes="drop-aria" />
                                            <TextBlock Classes="align-center m-10 text-wrap"
                                                       Text="{DynamicResource Lang.Up}" />
                                        </Panel>

                                        <Panel Grid.Column="1" Tag="DropParent">
                                            <Rectangle Classes="drop-aria" />
                                            <TextBlock Classes="align-center m-10 text-wrap"
                                                       Text="{DynamicResource Lang.Parent}" />
                                        </Panel>

                                        <Panel Grid.Column="2" Tag="DropDown">
                                            <Rectangle Classes="drop-aria" />
                                            <TextBlock Classes="align-center m-10 text-wrap"
                                                       Text="{DynamicResource Lang.Down}" />
                                        </Panel>
                                    </Grid>
                                </Grid>
                            </Border>
                        </Panel>
                    </Panel>
                </Button>
            </DataTemplate>
        </Setter>
    </Style>
</Styles>